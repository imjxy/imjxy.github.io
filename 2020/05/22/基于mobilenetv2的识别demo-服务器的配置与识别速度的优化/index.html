<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>基于mobilenetv2的识别demo--服务器的配置与识别速度的优化 - 好好学习，天天向上</title><meta description="优化了一下之前那个识别demo的识别速度，并且把模型放到了服务器上，还是有很多毛病就是了。 我真的这11天没有摸鱼（大概吧）"><meta property="og:type" content="blog"><meta property="og:title" content="基于mobilenetv2的识别demo--服务器的配置与识别速度的优化"><meta property="og:url" content="http://yoursite.com/2020/05/22/%E5%9F%BA%E4%BA%8Emobilenetv2%E7%9A%84%E8%AF%86%E5%88%ABdemo-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E8%AF%86%E5%88%AB%E9%80%9F%E5%BA%A6%E7%9A%84%E4%BC%98%E5%8C%96/"><meta property="og:site_name" content="好好学习，天天向上"><meta property="og:description" content="优化了一下之前那个识别demo的识别速度，并且把模型放到了服务器上，还是有很多毛病就是了。 我真的这11天没有摸鱼（大概吧）"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://i.loli.net/2020/05/22/anEvyeNDw9WLROJ.png"><meta property="article:published_time" content="2020-05-22T11:58:06.000Z"><meta property="article:modified_time" content="2020-05-23T02:53:52.642Z"><meta property="article:author" content="田土豆"><meta property="article:tag" content="pyside2"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://i.loli.net/2020/05/22/anEvyeNDw9WLROJ.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://yoursite.com/2020/05/22/%E5%9F%BA%E4%BA%8Emobilenetv2%E7%9A%84%E8%AF%86%E5%88%ABdemo-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E8%AF%86%E5%88%AB%E9%80%9F%E5%BA%A6%E7%9A%84%E4%BC%98%E5%8C%96/"},"headline":"好好学习，天天向上","image":["https://i.loli.net/2020/05/22/anEvyeNDw9WLROJ.png"],"datePublished":"2020-05-22T11:58:06.000Z","dateModified":"2020-05-23T02:53:52.642Z","author":{"@type":"Person","name":"田土豆"},"description":"优化了一下之前那个识别demo的识别速度，并且把模型放到了服务器上，还是有很多毛病就是了。 我真的这11天没有摸鱼（大概吧）"}</script><link rel="canonical" href="http://yoursite.com/2020/05/22/%E5%9F%BA%E4%BA%8Emobilenetv2%E7%9A%84%E8%AF%86%E5%88%ABdemo-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E8%AF%86%E5%88%AB%E9%80%9F%E5%BA%A6%E7%9A%84%E4%BC%98%E5%8C%96/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="好好学习，天天向上" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="thumbnail" src="https://i.loli.net/2020/05/22/anEvyeNDw9WLROJ.png" alt="基于mobilenetv2的识别demo--服务器的配置与识别速度的优化"></span></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-05-22T11:58:06.000Z" title="2020-05-22T11:58:06.000Z">2020-05-22</time><span class="level-item"><a class="link-muted" href="/categories/python/">python</a></span><span class="level-item">20 分钟 读完 (大约 3054 个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">基于mobilenetv2的识别demo--服务器的配置与识别速度的优化</h1><div class="content"><p>优化了一下之前那个识别demo的识别速度，并且把模型放到了服务器上，还是有很多毛病就是了。</p>
<p>我真的这11天没有摸鱼（大概吧）</p>
<a id="more"></a>

<p>其实这11天也不是在摸鱼，实验室老师突然要我们参加互联网加，一周之内参赛材料改了三四个版本，完了之后又发现自己侥幸过了实习的一面，又疯狂准备了两天面经（虽然还是挂了，以后有机会记录一下，还是学到不少东西的）然后给自己放了两天假，哎希望自己能再自律一点吧。</p>
<h1 id="客户端功能设计"><a href="#客户端功能设计" class="headerlink" title="客户端功能设计"></a>客户端功能设计</h1><h2 id="UI设计"><a href="#UI设计" class="headerlink" title="UI设计"></a>UI设计</h2><p><img src="https://i.loli.net/2020/05/22/dzgRmfB3AVei5Gx.png" alt="客户端UI设计"></p>
<p>这次感觉UI改的稍微好看一点了，功能比较明确，一会可以看看后面的展示。</p>
<h2 id="功能设计"><a href="#功能设计" class="headerlink" title="功能设计"></a>功能设计</h2><h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.ui = QUiLoader().load(<span class="string">'client.ui'</span>)</span><br><span class="line">        self.ui.btn_select.clicked.connect(self.open)</span><br><span class="line">        self.ui.btn_connect.clicked.connect(self.conn)</span><br><span class="line">        self.ui.btn_load.clicked.connect(self.load)</span><br><span class="line">        self.ui.btn_disconnect.clicked.connect(self.disconnect)</span><br><span class="line">        self.s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">        self.pic_path = <span class="string">''</span></span><br></pre></td></tr></table></figure>

<p>依旧是老生常谈的加载ui，绑定函数</p>
<h3 id="打开文件"><a href="#打开文件" class="headerlink" title="打开文件"></a>打开文件</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">open</span><span class="params">(self)</span>:</span></span><br><span class="line">    filePath, _ = QFileDialog.getOpenFileName(</span><br><span class="line">        self.ui,  <span class="comment"># 父窗口对象</span></span><br><span class="line">        <span class="string">"选择你要上传的图片"</span>,  <span class="comment"># 标题</span></span><br><span class="line">        <span class="string">r"C:\Users\HASEE\Desktop\deep-learning-for-image-processing-master\data_set\appleleaf_data\train"</span>,  <span class="comment"># 起始目录</span></span><br><span class="line">        <span class="string">"图片类型 (*.png *.jpg *.bmp)"</span>  <span class="comment"># 选择类型过滤项，过滤内容在括号中</span></span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">if</span> filePath <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        QMessageBox.information(self, <span class="string">'提示'</span>, <span class="string">'文件为空，请重新操作'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        self.pic_path = filePath</span><br><span class="line">        pic = QtGui.QPixmap(self.pic_path)</span><br><span class="line">        self.ui.lb_pic1.setPixmap(pic)</span><br><span class="line">        self.ui.le_select.setText(self.pic_path)</span><br></pre></td></tr></table></figure>

<p>打开文件函数，这里没有改动，按下选择文件按钮后弹出文件选择框。再说一下文件选择窗口的<code>QFileDialog.getOpenFileName</code>方法吧：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">filePath, _  = QFileDialog.getOpenFileName(</span><br><span class="line">            self.ui,             <span class="comment"># 父窗口对象</span></span><br><span class="line">            <span class="string">"选择你要上传的图片"</span>, <span class="comment"># 标题</span></span><br><span class="line">            <span class="string">r"d:\\data"</span>,        <span class="comment"># 起始目录</span></span><br><span class="line">            <span class="string">"图片类型 (*.png *.jpg *.bmp)"</span> <span class="comment"># 选择类型过滤项，过滤内容在括号中</span></span><br><span class="line">        )</span><br></pre></td></tr></table></figure>

<p>因为该方法返回的是一个元组，第一个元素是选择的文件路径，第二个元素是文件类型，如果你只想获取文件路径即可，可以采用上面的代码写法。</p>
<p>如果用户点击了 选择框的 取消选择按钮，返回 空字符串。</p>
<h3 id="更新信息"><a href="#更新信息" class="headerlink" title="更新信息"></a>更新信息</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">showinbox</span><span class="params">(self, s)</span>:</span></span><br><span class="line">    self.ui.tb_text.append(s)</span><br><span class="line">    self.ui.tb_text.ensureCursorVisible()</span><br></pre></td></tr></table></figure>

<p>这里就是一个把字符串更新到TextBrowser里的方法，通过 <code>append</code> 方法在编辑框末尾添加文本内容，有时，浏览框里面的内容长度超出了可见范围，我们在末尾添加了内容，往往希望控件自动翻滚到当前添加的这行，可以通过 <code>ensureCursorVisible</code> 方法来实现</p>
<h3 id="socket-连接"><a href="#socket-连接" class="headerlink" title="socket 连接"></a>socket 连接</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conn</span><span class="params">(self)</span>:</span></span><br><span class="line">    IP = self.ui.le_ip.text()</span><br><span class="line">    SEVER_PORT = int(self.ui.le_port.text())</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        self.s.connect((IP, SEVER_PORT))</span><br><span class="line">    <span class="keyword">except</span> socket.error <span class="keyword">as</span> msg:</span><br><span class="line">        self.showinbox(str(msg))</span><br><span class="line">        <span class="comment"># sys.exit(1)</span></span><br><span class="line">    self.showinbox(self.s.recv(<span class="number">1024</span>).decode(<span class="string">"utf-8"</span>))</span><br></pre></td></tr></table></figure>

<p>这里就是将用户输入的IP和端口作为地址连接到服务器，并且接收服务器确认连接的<code>&#39;Hi, Welcome to the server!&#39;</code>消息，如果出错的话，把异常信息更新到TextBrowser里。</p>
<h3 id="断开连接"><a href="#断开连接" class="headerlink" title="断开连接"></a>断开连接</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">disconnect</span><span class="params">(self)</span>:</span></span><br><span class="line">    self.s.send(<span class="string">b"stop"</span>)</span><br><span class="line">    self.s.close()</span><br><span class="line">    self.showinbox(<span class="string">"已断开和服务器的连接"</span>)</span><br></pre></td></tr></table></figure>

<p>点击按钮“断开连接”时调用，首先向服务器发送“stop”告诉服务器要断开连接，<code>b</code>放在字符串前将字符串转为socket可以发送的字节形式。</p>
<h3 id="选择种类"><a href="#选择种类" class="headerlink" title="选择种类"></a>选择种类</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Kind_selsct</span><span class="params">(self)</span>:</span></span><br><span class="line">    kind = self.ui.cb_kind.currentText()</span><br><span class="line">    <span class="keyword">if</span> kind == <span class="string">"fruit(apple,banana,pear,peach,orange)"</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">b"fruit"</span></span><br><span class="line">    <span class="keyword">elif</span> kind == <span class="string">"flower(daisy,dandelion,roses,sunflowers,tulips)"</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">b"flower"</span></span><br><span class="line">    <span class="keyword">elif</span> kind == <span class="string">"appleleaf(170,171,172,173,174）"</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">b"appleleaf"</span></span><br></pre></td></tr></table></figure>

<p>这里就是跟那个组合选项框有关的函数了，目前手里有这三个数据集，水果的数据集之前训练过但是没有保存参数文件，数据集实在太大了就没有训练这个。</p>
<p>可以使用 <code>currentText</code> 方法来获取当前 <code>选中的选项</code> 的文本</p>
<h3 id="上传文件"><a href="#上传文件" class="headerlink" title="上传文件"></a>上传文件</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load</span><span class="params">(self)</span>:</span></span><br><span class="line">    self.s.send(<span class="string">b"load"</span>)</span><br><span class="line">    filepath = self.pic_path</span><br><span class="line">    <span class="keyword">if</span> os.path.isfile(filepath):</span><br><span class="line">        <span class="comment"># 定义定义文件信息。128s表示文件名为128bytes长，l表示一个int或log文件类型，在此为文件大小</span></span><br><span class="line">        fileinfo_size = struct.calcsize(<span class="string">'128sl'</span>)</span><br><span class="line">        <span class="comment"># 定义文件头信息，包含文件名和文件大小</span></span><br><span class="line">        fhead = struct.pack(</span><br><span class="line">            <span class="string">'128sl'</span>,</span><br><span class="line">            os.path.basename(filepath).encode(encoding=<span class="string">"utf-8"</span>),</span><br><span class="line">            os.stat(filepath).st_size</span><br><span class="line">        )</span><br><span class="line">        print(<span class="string">'client filepath: &#123;0&#125;'</span>.format(filepath))</span><br><span class="line">        self.s.send(fhead)</span><br><span class="line"></span><br><span class="line">        fp = open(filepath, <span class="string">'rb'</span>)</span><br><span class="line">        <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">            data = fp.read(<span class="number">1024</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> data:</span><br><span class="line">                print(<span class="string">'&#123;0&#125; file send over...'</span>.format(filepath))</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            self.s.send(data)</span><br><span class="line">            <span class="comment"># print("in")</span></span><br><span class="line">        <span class="comment"># print("out")</span></span><br><span class="line">    kindnum = self.Kind_selsct()</span><br><span class="line">    text = <span class="string">"您选择的类别是"</span> + str(kindnum)[<span class="number">2</span>:<span class="number">-1</span>]</span><br><span class="line">    self.showinbox(text)</span><br><span class="line">    self.showinbox(self.s.recv(<span class="number">1024</span>).decode(<span class="string">"utf-8"</span>))</span><br><span class="line">    self.s.send(kindnum)</span><br><span class="line">    time1=time.time()</span><br><span class="line">    result=self.s.recv(<span class="number">1024</span>).decode(<span class="string">"utf-8"</span>)</span><br><span class="line">    time2=time.time()</span><br><span class="line">    thetime=time2-time1</span><br><span class="line">    thetime=<span class="string">"&#123;:.2f&#125;"</span>.format(thetime)</span><br><span class="line">    self.ui.lb_time.setText(<span class="string">"识别时间："</span>+thetime+<span class="string">"s"</span>)</span><br><span class="line">    result=result.split(<span class="string">','</span>)</span><br><span class="line">    probability=result[<span class="number">1</span>][<span class="number">0</span>:<span class="number">-1</span>]</span><br><span class="line">    result=result[<span class="number">0</span>][<span class="number">2</span>:<span class="number">-1</span>]</span><br><span class="line">    self.showinbox(<span class="string">"结果为"</span>+result+<span class="string">"的概率为"</span>+probability)</span><br><span class="line">    self.ui.lb_recores.setText(<span class="string">"识别结果："</span>+result)</span><br><span class="line">    self.showinbox(self.s.recv(<span class="number">1024</span>).decode(<span class="string">"utf-8"</span>))</span><br><span class="line">    self.showinbox(<span class="string">"\n"</span>)</span><br></pre></td></tr></table></figure>

<p>这个里面涉及的东西还蛮多的，我一条条按顺序说吧</p>
<p>其实关于识别速度的优化这里真的非常简单，都不能叫做优化，应该说是我终于正确使用了，就是在服务器开始时就初始化模型，之前那个每次5s是因为每次识别都初始化了模型，而且跟数据集的大小也有关，数据集越大，模型效果越好，识别速度也就越快（大概）</p>
<p>使用<code>os.path.isdir()</code>函数判断某一路径是否为目录，返回值为true或false</p>
<p>struct数据格式转换</p>
<blockquote>
<p>Python是一门非常简洁的语言，对于数据类型的表示，不像其他语言预定义了许多类型（如：在C#中，光整型就定义了8种），它只定义了六种基本类型：字符串，整数，浮点数，元组，列表，字典。通过这六种数据类型，我们可以完成大部分工作。但当Python需要通过网络与其他的平台进行交互的时候，必须考虑到将这些数据类型与其他平台或语言之间的类型进行互相转换问题。打个比方：C++写的客户端发送一个int型(4字节)变量的数据到Python写的服务器，Python接收到表示这个整数的4个字节数据，怎么解析成Python认识的整数呢？ Python的标准模块struct就用来解决这个问题。</p>
</blockquote>
<p>写了写发现struct模块的内容有点多，我放到明天来说吧</p>
<blockquote>
<p>下次一定</p>
</blockquote>
<h1 id="服务器功能设计"><a href="#服务器功能设计" class="headerlink" title="服务器功能设计"></a>服务器功能设计</h1><h2 id="服务器类"><a href="#服务器类" class="headerlink" title="服务器类"></a>服务器类</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sever</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># 创建socket</span></span><br><span class="line">        self.s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">        self.s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        self.socket_service()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">socket_service</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            self.s.bind((<span class="string">'127.0.0.1'</span>, <span class="number">6666</span>))</span><br><span class="line">            self.s.listen(<span class="number">10</span>)</span><br><span class="line">        <span class="keyword">except</span> socket.error <span class="keyword">as</span> msg:</span><br><span class="line">            print(msg)</span><br><span class="line">            sys.exit(<span class="number">1</span>)</span><br><span class="line">        print(<span class="string">'Waiting connection...'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">            conn, addr = self.s.accept()</span><br><span class="line">            t = threading.Thread(target=deal_data, args=(conn, addr))</span><br><span class="line">            t.start()</span><br></pre></td></tr></table></figure>

<p>首先创建socket，以本机作为服务器，端口设置为‘6666’，每有一个客户端连接创建一个线程来运行，让线程去执行<code>deal_data</code>函数。</p>
<h2 id="数据处理函数"><a href="#数据处理函数" class="headerlink" title="数据处理函数"></a>数据处理函数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">deal_data</span><span class="params">(conn, addr)</span>:</span></span><br><span class="line">    print(<span class="string">'Accept new connection from &#123;0&#125;'</span>.format(addr))</span><br><span class="line">    <span class="comment"># conn.settimeout(500)</span></span><br><span class="line">    conn.send(<span class="string">'Hi, Welcome to the server!'</span>.encode(<span class="string">"utf-8"</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">        text=conn.recv(<span class="number">1024</span>).decode(<span class="string">'utf-8'</span>)</span><br><span class="line">        <span class="keyword">if</span> text==<span class="string">"load"</span>:</span><br><span class="line">            fileinfo_size = struct.calcsize(<span class="string">'128sl'</span>)</span><br><span class="line">            buf = conn.recv(fileinfo_size)</span><br><span class="line">            <span class="keyword">if</span> buf:</span><br><span class="line">                filename, filesize = struct.unpack(<span class="string">'128sl'</span>, buf)</span><br><span class="line">                fn = filename.strip(<span class="string">b"\x00"</span>).decode(<span class="string">"utf-8"</span>)</span><br><span class="line">                new_filename = os.path.join(<span class="string">'./'</span>, <span class="string">'new_'</span> + fn)</span><br><span class="line">                print(new_filename, filesize)</span><br><span class="line">                print(<span class="string">'file new name is &#123;0&#125;, filesize if &#123;1&#125;'</span>.format(new_filename, filesize))</span><br><span class="line"></span><br><span class="line">                recvd_size = <span class="number">0</span>  <span class="comment"># 定义已接收文件的大小</span></span><br><span class="line">                fp = open(new_filename, <span class="string">'wb'</span>)</span><br><span class="line">                print(<span class="string">'start receiving...'</span>)</span><br><span class="line"></span><br><span class="line">                <span class="keyword">while</span> <span class="keyword">not</span> recvd_size == filesize:</span><br><span class="line">                    <span class="keyword">if</span> filesize - recvd_size &gt; <span class="number">1024</span>:</span><br><span class="line">                        data = conn.recv(<span class="number">1024</span>)</span><br><span class="line">                        recvd_size += len(data)</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        data = conn.recv(filesize - recvd_size)</span><br><span class="line">                        recvd_size = filesize</span><br><span class="line">                    fp.write(data)</span><br><span class="line">                fp.close()</span><br><span class="line">                <span class="comment"># print(type(fp))</span></span><br><span class="line">                print(<span class="string">'end receive...'</span>)</span><br><span class="line">            conn.send(<span class="string">'服务器成功接收文件'</span>.encode(<span class="string">"utf-8"</span>))</span><br><span class="line">            <span class="comment"># result = predict.predict(new_filename)</span></span><br><span class="line">            <span class="comment"># result = str(result)</span></span><br><span class="line">            <span class="comment"># conn.send(result.encode("utf-8"))</span></span><br><span class="line">            text = conn.recv(<span class="number">1024</span>).decode(<span class="string">'utf-8'</span>)</span><br><span class="line">            <span class="comment"># print(text)</span></span><br><span class="line">            result = predict(new_filename, text)</span><br><span class="line">            result = str(result)</span><br><span class="line">            conn.send(result.encode(<span class="string">"utf-8"</span>))</span><br><span class="line">            <span class="comment"># print(conn.recv(1024).decode('utf-8'))</span></span><br><span class="line">            <span class="comment"># print(str(addr)+"断开连接")</span></span><br><span class="line">            <span class="comment"># conn.close()</span></span><br><span class="line">            <span class="comment"># break</span></span><br><span class="line">            conn.send(<span class="string">'服务器正等待下一份文件...'</span>.encode(<span class="string">"utf-8"</span>))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(str(addr)+<span class="string">"断开连接"</span>)</span><br><span class="line">            conn.close()</span><br><span class="line">            <span class="keyword">break</span></span><br></pre></td></tr></table></figure>

<p>逻辑大概是这样的：一旦与一个客户端建立连接后，返回<code>&#39;Hi, Welcome to the server!&#39;</code>提示客户端已成功连接，之后进入while循环处理接收并识别图片。首先判断用户传来的信号是load还是stop，如果是stop就断开连接（测试的时候断开连接是有问题的，等以后改进吧），如果是load，就先接收图片，再对图片调用预测函数。</p>
<p>关于文件发送与接收的struct这个用法放到后面来说。</p>
<p>代码里注释掉的测试用的东西有些多，以后注意删掉吧还是。</p>
<h2 id="模型初始化及预测函数"><a href="#模型初始化及预测函数" class="headerlink" title="模型初始化及预测函数"></a>模型初始化及预测函数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">model = MobileNetV2(num_classes=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">predict</span><span class="params">(pic_path, flag)</span>:</span></span><br><span class="line">    im_height = <span class="number">224</span></span><br><span class="line">    im_width = <span class="number">224</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># load image</span></span><br><span class="line">    img = Image.open(pic_path)</span><br><span class="line">    <span class="comment"># resize image to 224x224</span></span><br><span class="line">    img = img.resize((im_width, im_height))</span><br><span class="line">    plt.imshow(img)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># scaling pixel value to (-1,1)</span></span><br><span class="line">    img = np.array(img).astype(np.float32)</span><br><span class="line">    img = ((img / <span class="number">255.</span>) - <span class="number">0.5</span>) * <span class="number">2.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Add the image to a batch where it's the only member.</span></span><br><span class="line">    img = (np.expand_dims(img, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> flag == <span class="string">"appleleaf"</span>:</span><br><span class="line">        <span class="comment"># read class_indict</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            json_file = open(<span class="string">'./class_indices_appleleaf.json'</span>, <span class="string">'r'</span>)</span><br><span class="line">            class_indict = json.load(json_file)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            print(e)</span><br><span class="line">            exit(<span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># model.build((None, 224, 224, 3))  # when using subclass model</span></span><br><span class="line">        model.load_weights(<span class="string">'./save_weights/appleleaf_resMobileNetV2.ckpt'</span>)</span><br><span class="line">    <span class="keyword">elif</span> flag==<span class="string">"flower"</span>:</span><br><span class="line">        <span class="comment"># read class_indict</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            json_file = open(<span class="string">'./class_indices_flower.json'</span>, <span class="string">'r'</span>)</span><br><span class="line">            class_indict = json.load(json_file)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            print(e)</span><br><span class="line">            exit(<span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># model.build((None, 224, 224, 3))  # when using subclass model</span></span><br><span class="line">        model.load_weights(<span class="string">'./save_weights/flower_resMobileNetV2.ckpt'</span>)</span><br><span class="line">    result = np.squeeze(model.predict(img))</span><br><span class="line">    prediction = tf.keras.layers.Softmax()(result).numpy()</span><br><span class="line">    predict_class = np.argmax(result)</span><br><span class="line">    s = class_indict[str(predict_class)], prediction[predict_class]</span><br><span class="line">    <span class="keyword">return</span> s</span><br></pre></td></tr></table></figure>

<p>这个地方不懂的可以去翻看<a href="[https://imjxy.github.io/2020/05/07/%E5%9F%BA%E4%BA%8EMobileNetv2%E7%9A%84%E8%AF%86%E5%88%ABdemo/](https://imjxy.github.io/2020/05/07/基于MobileNetv2的识别demo/)">上一个demo博客</a>里我放的教程链接，再次强推。</p>
<p>哎说起这个实验室学长推荐我们换成pytorch，好在这个教程里也有，up主一生平安。</p>
<h1 id="结果展示"><a href="#结果展示" class="headerlink" title="结果展示"></a>结果展示</h1><p><img src="https://i.loli.net/2020/05/22/aL5U1qeHspQztWf.png" alt="客户端展示"></p>
<p><img src="https://i.loli.net/2020/05/22/lqIigVOuGXSv3LQ.png" alt="服务器输出"></p>
<p><strong>yeah</strong></p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>直接把周报这块的内容贴到这里吧</p>
<p>进展：</p>
<ul>
<li><p>加入了花朵数据集的识别，水果数据集的权重正在训练</p>
</li>
<li><p>优化了识别速度，服务器启动时就初始化模型</p>
</li>
<li><p>实现了连续上传识别</p>
</li>
<li><p>调整了服务器结构，改成类的形式便于调用</p>
</li>
<li><p>修改了客户端UI</p>
</li>
</ul>
<p>不足：</p>
<ul>
<li><p>断开连接后实际上是个假断开，应该是服务器的问题，还需要学习后端的知识进一步修改代码</p>
</li>
<li><p>目前还没有想到多指标识别应该怎样处理</p>
</li>
<li><p>打包总是Qt库出现问题无法打包，查阅后可能pyinstaller和python3.7有不兼容的问题，准备下一个3.5的环境尝试打包，如果打包依旧不成功，考虑用其他语言完成客户端的搭建</p>
</li>
</ul>
<h1 id="闲话"><a href="#闲话" class="headerlink" title="闲话"></a>闲话</h1><ul>
<li>互联网加这个事就不说了，如果最后真的在老师和学长们的帮助下有机会得奖，会更一篇各项材料的准备和编写的博客的，到时候再说心路历程吧。</li>
<li>腾讯暑期实习面试这个，其实是我有一天复习烦了做了个简历投了后端，没想到被捞了，还过了电话一面。经过这两次面试其实学到了很多东西，面试官都很nice，第二个面试官在我问过他对我有什么建议后真的对我提了一些东西，他说的我的知识面太窄也是事实。趁着这次大创要做服务器，争取按照后端技术栈好好学一下，增长经验。</li>
</ul>
</div><div class="article-tags size-small is-uppercase mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/pyside2/">pyside2</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button is-info donate"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/" alt="支付宝"></span></a><a class="button donate" href="/" style="background-color:rgba(255,128,62,.87);border-color:transparent;color:white;" target="_blank" rel="noopener"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>送我杯咖啡</span></a><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/05/23/python%E4%B8%ADstruct%E6%A8%A1%E5%9D%97%E7%9A%84%E4%BD%BF%E7%94%A8/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">python中struct模块的使用</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/05/11/mysql%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"><span class="level-item">mysql的安装与摸鱼</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="content" id="valine-thread"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js"></script><script>new Valine({
            el: '#valine-thread' ,
            notify: false,
            verify: false,
            appId: 'iaU4Euu6nzJsbEOab2EK2az9-gzGzoHsz',
            appKey: '4HEpEpkxC0tY2kS3o4E77yXu',
            placeholder: '哈喽哈',
            avatar: 'mm',
            avatarForce: false,
            meta: ["nick","mail","link"],
            pageSize: 10,
            visitor: false,
            highlight: true,
            recordIP: false
        });</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="" src="https://pic1.zhimg.com/80/v2-0cd9391d8130e9059784c936d531a2f0_720w.jpg" alt="田土豆"></figure><p class="title is-size-4 is-block line-height-inherit">田土豆</p><p class="is-size-6 is-block">今天开学了么</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Wuhan,China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">13</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">4</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">10</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/imjxy" target="_blank" rel="noopener">关注我</a></div></div></div><div class="card widget" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="is-flex" href="#客户端功能设计"><span class="mr-2">1</span><span>客户端功能设计</span></a><ul class="menu-list"><li><a class="is-flex" href="#UI设计"><span class="mr-2">1.1</span><span>UI设计</span></a></li><li><a class="is-flex" href="#功能设计"><span class="mr-2">1.2</span><span>功能设计</span></a><ul class="menu-list"><li><a class="is-flex" href="#初始化"><span class="mr-2">1.2.1</span><span>初始化</span></a></li><li><a class="is-flex" href="#打开文件"><span class="mr-2">1.2.2</span><span>打开文件</span></a></li><li><a class="is-flex" href="#更新信息"><span class="mr-2">1.2.3</span><span>更新信息</span></a></li><li><a class="is-flex" href="#socket-连接"><span class="mr-2">1.2.4</span><span>socket 连接</span></a></li><li><a class="is-flex" href="#断开连接"><span class="mr-2">1.2.5</span><span>断开连接</span></a></li><li><a class="is-flex" href="#选择种类"><span class="mr-2">1.2.6</span><span>选择种类</span></a></li><li><a class="is-flex" href="#上传文件"><span class="mr-2">1.2.7</span><span>上传文件</span></a></li></ul></li></ul></li><li><a class="is-flex" href="#服务器功能设计"><span class="mr-2">2</span><span>服务器功能设计</span></a><ul class="menu-list"><li><a class="is-flex" href="#服务器类"><span class="mr-2">2.1</span><span>服务器类</span></a></li><li><a class="is-flex" href="#数据处理函数"><span class="mr-2">2.2</span><span>数据处理函数</span></a></li><li><a class="is-flex" href="#模型初始化及预测函数"><span class="mr-2">2.3</span><span>模型初始化及预测函数</span></a></li></ul></li><li><a class="is-flex" href="#结果展示"><span class="mr-2">3</span><span>结果展示</span></a></li><li><a class="is-flex" href="#总结"><span class="mr-2">4</span><span>总结</span></a></li><li><a class="is-flex" href="#闲话"><span class="mr-2">5</span><span>闲话</span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://github.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Github</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/Android/"><span class="level-start"><span class="level-item">Android</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/java/"><span class="level-start"><span class="level-item">java</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/python/"><span class="level-start"><span class="level-item">python</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="level-start"><span class="level-item">数据库</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><a class="media-left" href="/2020/07/05/LeetCode%E7%83%AD%E9%A2%98HOT100%EF%BC%8815-17-19-20-21%EF%BC%89/"><p class="image is-64x64"><img class="thumbnail" src="https://i.loli.net/2020/07/05/fS3TeQwhPmIFC6J.png" alt="LeetCode热题HOT100（15,17,19,20,21）"></p></a><div class="media-content size-small"><p><time dateTime="2020-07-05T13:54:29.000Z">2020-07-05</time></p><p class="title is-6"><a class="link-muted" href="/2020/07/05/LeetCode%E7%83%AD%E9%A2%98HOT100%EF%BC%8815-17-19-20-21%EF%BC%89/">LeetCode热题HOT100（15,17,19,20,21）</a></p><p class="is-uppercase"></p></div></article><article class="media"><a class="media-left" href="/2020/06/04/%E8%B0%83%E7%94%A8%E7%9B%B8%E6%9C%BA%E5%B9%B6%E8%A3%81%E5%89%AAAPP/"><p class="image is-64x64"><img class="thumbnail" src="https://i.loli.net/2020/06/04/PwzUDIg3OqWZSN1.jpg" alt="调用相机并裁剪APP"></p></a><div class="media-content size-small"><p><time dateTime="2020-06-04T03:15:29.000Z">2020-06-04</time></p><p class="title is-6"><a class="link-muted" href="/2020/06/04/%E8%B0%83%E7%94%A8%E7%9B%B8%E6%9C%BA%E5%B9%B6%E8%A3%81%E5%89%AAAPP/">调用相机并裁剪APP</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Android/">Android</a></p></div></article><article class="media"><a class="media-left" href="/2020/06/02/Java%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%93%E6%9E%84%E2%80%94%E2%80%94%E3%80%8AJava%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E5%8D%B7%E4%B8%80%EF%BC%9A%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E3%80%8B/"><p class="image is-64x64"><img class="thumbnail" src="https://i.loli.net/2020/06/02/18qVxfmjdkMlueB.jpg" alt="Java的基本程序设计结构——《Java核心技术卷一：基础知识》"></p></a><div class="media-content size-small"><p><time dateTime="2020-06-02T13:08:22.000Z">2020-06-02</time></p><p class="title is-6"><a class="link-muted" href="/2020/06/02/Java%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%93%E6%9E%84%E2%80%94%E2%80%94%E3%80%8AJava%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E5%8D%B7%E4%B8%80%EF%BC%9A%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E3%80%8B/">Java的基本程序设计结构——《Java核心技术卷一：基础知识》</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/java/">java</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-06-02T12:58:32.000Z">2020-06-02</time></p><p class="title is-6"><a class="link-muted" href="/2020/06/02/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/">嵌入式系统复习（一）</a></p><p class="is-uppercase"></p></div></article><article class="media"><a class="media-left" href="/2020/05/23/python%E4%B8%ADstruct%E6%A8%A1%E5%9D%97%E7%9A%84%E4%BD%BF%E7%94%A8/"><p class="image is-64x64"><img class="thumbnail" src="https://i.loli.net/2020/05/24/Iivq1olJOs9r6by.png" alt="python中struct模块的使用"></p></a><div class="media-content size-small"><p><time dateTime="2020-05-23T12:52:29.000Z">2020-05-23</time></p><p class="title is-6"><a class="link-muted" href="/2020/05/23/python%E4%B8%ADstruct%E6%A8%A1%E5%9D%97%E7%9A%84%E4%BD%BF%E7%94%A8/">python中struct模块的使用</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/python/">python</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2020/07/"><span class="level-start"><span class="level-item">七月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/06/"><span class="level-start"><span class="level-item">六月 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/05/"><span class="level-start"><span class="level-item">五月 2020</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/LeetCode/"><span class="tag">LeetCode</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/exifread/"><span class="tag">exifread</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mysql/"><span class="tag">mysql</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pat/"><span class="tag">pat</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pyside2/"><span class="tag">pyside2</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/struct/"><span class="tag">struct</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"><span class="tag">博客搭建</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%9F%BA%E7%A1%80/"><span class="tag">基础</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%A4%9A%E5%AA%92%E4%BD%93%E8%BF%90%E7%94%A8/"><span class="tag">多媒体运用</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/"><span class="tag">嵌入式</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="订阅"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="好好学习，天天向上" height="28"></a><p class="size-small"><span>&copy; 2020 田土豆</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'http://yoursite.com',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>